Here are all files from client/src/pages ó each filename followed by its full code.
---
FILE: HomeFeed.tsx
import { useState, useEffect, useCallback } from 'react';
import { useApp } from '@/context/AppContext';
import { getPosts, expressInterest } from '@/lib/api';
import LocationPill from '@/components/LocationPill';
import WeatherBanner from '@/components/WeatherBanner';
import FeedFilters from '@/components/FeedFilters';
import PlantCardLarge from '@/components/PlantCardLarge';
import PlantCardSmall from '@/components/PlantCardSmall';
import LocationPermissionModal from '@/components/LocationPermissionModal';
import type { Post } from '@/types';
import { Leaf } from 'lucide-react';

const HomeFeed = () => {
  const { location, feedType, postType, setFeedType, setPostType, locationPermissionAsked, setNewPostCallback } = useApp();
  const [posts, setPosts] = useState<Post[]>([]);
  const [loading, setLoading] = useState(true);
  const [showLocationModal, setShowLocationModal] = useState(false);
  const [newPostToast, setNewPostToast] = useState<Post | null>(null);

  const fetchPosts = useCallback(async () => {
    setLoading(true);
    try {
      const params: Record<string, unknown> = { feed: feedType, page: 1, limit: 20 };
      if (postType !== 'all') params.type = postType;
      if (feedType === 'nearby' && location) { params.lat = location.lat; params.lon = location.lon; }
      if (feedType === 'city' && location) { params.city = location.city; }
      const res = await getPosts(params);
      setPosts(res.data?.data?.posts || res.data?.posts || res.data || []);
    } catch (e) {
      console.error('Feed fetch error:', e);
      setPosts([]);
    }
    setLoading(false);
  }, [feedType, postType, location]);

  useEffect(() => { fetchPosts(); }, [fetchPosts]);

  useEffect(() => {
    if (!locationPermissionAsked && !location) {
      const timer = setTimeout(() => setShowLocationModal(true), 800);
      return () => clearTimeout(timer);
    }
  }, [locationPermissionAsked, location]);

  useEffect(() => {
    setNewPostCallback((post: Post) => {
      setPosts((prev) => [post, ...prev]);
      setNewPostToast(post);
      setTimeout(() => setNewPostToast(null), 4000);
    });
    return () => setNewPostCallback(null);
  }, [setNewPostCallback]);

  const handleInterest = async (postId: string) => {
    try {
      const res = await expressInterest(postId);
      setPosts((prev) =>
        prev.map((p) =>
          p._id === postId
            ? { ...p, isInterested: res.data?.isInterested ?? !p.isInterested, interestedCount: res.data?.interestedCount ?? p.interestedCount }
            : p
        )
      );
    } catch (e) { console.error('Interest error:', e); }
  };

  const renderBentoFeed = () => {
    if (posts.length === 0 && !loading) {
      return (
        <div className="flex flex-col items-center justify-center py-16 space-y-4">
          <div className="text-7xl">ü™¥</div>
          <h2 className="font-display italic text-xl text-foreground">Your garden feed is quiet...</h2>
          <p className="text-sm text-muted-foreground text-center font-body">Be the first to share a plant in your city</p>
          <button className="bg-secondary text-secondary-foreground rounded-pill px-6 py-3 font-body font-semibold transition-transform hover:scale-105 active:scale-95">
            Share My First Plant üåø
          </button>
        </div>
      );
    }

    const elements: React.ReactNode[] = [];
    let i = 0;
    while (i < posts.length) {
      if (i < posts.length) {
        elements.push(<PlantCardLarge key={posts[i]._id} post={posts[i]} onInterest={handleInterest} />);
        i++;
      }
      if (i < posts.length) {
        const smallCards = posts.slice(i, i + 2);
        elements.push(
          <div key={`grid-${i}`} className="grid grid-cols-2 gap-3">
            {smallCards.map((p) => <PlantCardSmall key={p._id} post={p} />)}
          </div>
        );
        i += smallCards.length;
      }
      if (i > 0 && i % 5 === 0) {
        elements.push(<WeatherBanner key={`weather-${i}`} />);
      }
    }
    return elements;
  };

  return (
    <div className="max-w-[480px] mx-auto px-4 pb-24 pt-4 relative z-10">
      <div className="flex items-center justify-between mb-4">
        {location ? (
          <LocationPill city={location.city} countryCode={location.countryCode} onClick={() => setShowLocationModal(true)} />
        ) : (
          <button onClick={() => setShowLocationModal(true)} className="bg-secondary text-secondary-foreground rounded-pill px-3 py-1.5 font-tag text-sm font-medium">
            üìç Set Location
          </button>
        )}
        <div className="w-8 h-8 rounded-full bg-card card-shadow flex items-center justify-center">
          <Leaf className="w-4 h-4 text-primary" />
        </div>
      </div>

      <div className="mb-4"><WeatherBanner /></div>

      <div className="mb-5">
        <FeedFilters feedType={feedType} postType={postType} onFeedTypeChange={setFeedType} onPostTypeChange={setPostType} />
      </div>

      <div className="space-y-4">
        {loading ? (
          <div className="flex flex-col items-center py-16 space-y-3">
            <div className="w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin" />
            <p className="text-sm text-muted-foreground font-tag">Loading plants...</p>
          </div>
        ) : renderBentoFeed()}
      </div>

      {newPostToast && (
        <div className="fixed top-4 left-1/2 -translate-x-1/2 z-[70] bg-forest text-forest-foreground rounded-pill px-5 py-3 card-shadow flex items-center gap-3 animate-fade-up max-w-[440px]">
          <span className="text-sm font-body">üåø New plant shared in {newPostToast.location?.city}</span>
          <button onClick={() => setNewPostToast(null)} className="text-xs font-tag font-semibold underline">View</button>
        </div>
      )}

      <LocationPermissionModal open={showLocationModal} onClose={() => setShowLocationModal(false)} />
    </div>
  );
};

export default HomeFeed;
---
FILE: Index.tsx
// Update this page (the content is just a fallback if you fail to update the page)

const Index = () => {
  return (
    <div className="flex min-h-screen items-center justify-center bg-background">
      <div className="text-center">
        <h1 className="mb-4 text-4xl font-bold">Welcome to Your Blank App</h1>
        <p className="text-xl text-muted-foreground">Start building your amazing project here!</p>
      </div>
    </div>
  );
};

export default Index;
---
FILE: Login.tsx
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { login as loginApi, sendOTP, verifyOTPLogin } from '@/lib/api';
import { useApp } from '@/context/AppContext';

type LoginMode = 'password' | 'otp';
type OTPStep = 'email' | 'code';

const Login = () => {
  const navigate = useNavigate();
  const { setUser } = useApp();

  // Shared
  const [mode, setMode] = useState<LoginMode>('password');
  const [email, setEmail] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);

  // Password mode
  const [password, setPassword] = useState('');

  // OTP mode
  const [otpStep, setOtpStep] = useState<OTPStep>('email');
  const [otp, setOtp] = useState('');
  const [resendCooldown, setResendCooldown] = useState(0);

  const startCooldown = () => {
    setResendCooldown(60);
    const interval = setInterval(() => {
      setResendCooldown((c) => { if (c <= 1) { clearInterval(interval); return 0; } return c - 1; });
    }, 1000);
  };

  const handlePasswordLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setLoading(true);
    try {
      const res = await loginApi(email, password);
      if (res.data?.token) {
        localStorage.setItem('bagichalink_token', res.data.token);
        setUser(res.data.user);
        navigate('/feed');
      }
    } catch (err: any) {
      setError(err.response?.data?.message || 'Login failed. Please check your credentials.');
    }
    setLoading(false);
  };

  const handleSendOTP = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!email) { setError('Please enter your email.'); return; }
    setError('');
    setLoading(true);
    try {
      await sendOTP(email, 'login');
      setOtpStep('code');
      startCooldown();
    } catch (err: any) {
      setError(err.response?.data?.message || 'Failed to send OTP.');
    }
    setLoading(false);
  };

  const handleOTPLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    if (otp.length < 6) { setError('Please enter the 6-digit code.'); return; }
    setError('');
    setLoading(true);
    try {
      const res = await verifyOTPLogin(email, otp);
      if (res.data?.token) {
        localStorage.setItem('bagichalink_token', res.data.token);
        setUser(res.data.user);
        navigate('/feed');
      }
    } catch (err: any) {
      setError(err.response?.data?.message || 'Invalid OTP. Please try again.');
    }
    setLoading(false);
  };

  return (
    <div className="min-h-screen bg-background flex flex-col items-center justify-center px-6">
      <div className="w-full max-w-sm space-y-8">

        <div className="text-center space-y-2">
          <div className="text-8xl mb-4">üåø</div>
          <h1 className="font-display italic text-2xl text-foreground">
            Your plants deserve better than WhatsApp chaos.
          </h1>
          <p className="text-sm text-muted-foreground font-body">
            Join gardeners in 180+ countries swapping plants.
          </p>
        </div>

        {/* Mode switcher */}
        <div className="flex gap-1 bg-card rounded-pill p-1">
          <button onClick={() => { setMode('password'); setError(''); }}
            className={`flex-1 py-2 rounded-pill text-sm font-tag font-medium transition-all ${mode === 'password' ? 'bg-background shadow text-foreground' : 'text-muted-foreground'}`}>
            Password
          </button>
          <button onClick={() => { setMode('otp'); setError(''); setOtpStep('email'); }}
            className={`flex-1 py-2 rounded-pill text-sm font-tag font-medium transition-all ${mode === 'otp' ? 'bg-background shadow text-foreground' : 'text-muted-foreground'}`}>
            Email OTP ‚ú®
          </button>
        </div>

        {error && (
          <div className="bg-red-50 border border-red-200 text-red-700 rounded-card px-4 py-3 text-sm font-body">
            {error}
          </div>
        )}

        {/* Password Login */}
        {mode === 'password' && (
          <form onSubmit={handlePasswordLogin} className="space-y-5">
            <input type="email" value={email} onChange={(e) => setEmail(e.target.value)}
              placeholder="Email" required
              className="w-full bg-transparent border-0 border-b-2 border-border py-3 text-base font-body placeholder:text-muted-foreground focus:outline-none focus:border-primary transition-colors" />
            <input type="password" value={password} onChange={(e) => setPassword(e.target.value)}
              placeholder="Password" required
              className="w-full bg-transparent border-0 border-b-2 border-border py-3 text-base font-body placeholder:text-muted-foreground focus:outline-none focus:border-primary transition-colors" />
            <button type="submit" disabled={loading}
              className="w-full py-3.5 bg-forest text-forest-foreground rounded-pill font-body font-semibold text-base transition-transform hover:scale-[1.02] active:scale-95 disabled:opacity-50">
              {loading ? 'Signing in...' : 'Sign In üåø'}
            </button>
          </form>
        )}

        {/* OTP Login */}
        {mode === 'otp' && otpStep === 'email' && (
          <form onSubmit={handleSendOTP} className="space-y-5">
            <input type="email" value={email} onChange={(e) => setEmail(e.target.value)}
              placeholder="Email address" required
              className="w-full bg-transparent border-0 border-b-2 border-border py-3 text-base font-body placeholder:text-muted-foreground focus:outline-none focus:border-primary transition-colors" />
            <button type="submit" disabled={loading}
              className="w-full py-3.5 bg-forest text-forest-foreground rounded-pill font-body font-semibold text-base transition-transform hover:scale-[1.02] active:scale-95 disabled:opacity-50">
              {loading ? 'Sending code...' : 'Send OTP to Email üìß'}
            </button>
          </form>
        )}

        {mode === 'otp' && otpStep === 'code' && (
          <form onSubmit={handleOTPLogin} className="space-y-5">
            <p className="text-sm text-center text-muted-foreground font-body">
              Code sent to <strong>{email}</strong>
            </p>
            {/* OTP boxes */}
            <div className="flex gap-2 justify-center">
              {[0,1,2,3,4,5].map((i) => (
                <input key={i} type="text" inputMode="numeric" maxLength={1}
                  id={`login-otp-${i}`}
                  value={otp[i] || ''}
                  onChange={(e) => {
                    const val = e.target.value.replace(/\D/g, '');
                    const arr = otp.split('');
                    arr[i] = val;
                    setOtp(arr.join(''));
                    if (val && i < 5) document.getElementById(`login-otp-${i+1}`)?.focus();
                  }}
                  onKeyDown={(e) => {
                    if (e.key === 'Backspace' && !otp[i] && i > 0)
                      document.getElementById(`login-otp-${i-1}`)?.focus();
                  }}
                  className="w-11 h-14 text-center text-xl font-display font-semibold bg-card border-2 border-border rounded-card focus:outline-none focus:border-primary transition-colors"
                />
              ))}
            </div>
            <button type="submit" disabled={loading || otp.length < 6}
              className="w-full py-3.5 bg-forest text-forest-foreground rounded-pill font-body font-semibold text-base transition-transform hover:scale-[1.02] active:scale-95 disabled:opacity-50">
              {loading ? 'Verifying...' : 'Verify & Sign In üåø'}
            </button>
            <div className="text-center space-y-1">
              <button type="button" onClick={() => { setOtp(''); sendOTP(email, 'login'); startCooldown(); }}
                disabled={resendCooldown > 0}
                className="text-sm font-body text-muted-foreground hover:text-foreground disabled:opacity-40">
                {resendCooldown > 0 ? `Resend in ${resendCooldown}s` : 'Resend code'}
              </button>
              <br/>
              <button type="button" onClick={() => { setOtpStep('email'); setOtp(''); setError(''); }}
                className="text-xs font-body text-muted-foreground hover:text-foreground">
                ‚Üê Change email
              </button>
            </div>
          </form>
        )}

        <p className="text-center text-sm font-body">
          <span className="text-muted-foreground">New here? </span>
          <button onClick={() => navigate('/register')} className="text-secondary font-medium hover:underline">
            Create an account
          </button>
        </p>
      </div>
    </div>
  );
};

export default Login;
---
FILE: Matches.tsx
import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { getUserPosts, getMatches } from '@/lib/api';
import { useApp } from '@/context/AppContext';
import MatchScoreRing from '@/components/MatchScoreRing';
import { useInView } from 'react-intersection-observer';
import { countryFlag } from '@/lib/helpers';
import type { Post, MatchResult } from '@/types';

const Matches = () => {
  const navigate = useNavigate();
  const { user } = useApp();
  const [myPosts, setMyPosts] = useState<Post[]>([]);
  const [selectedPostId, setSelectedPostId] = useState<string | null>(null);
  const [matches, setMatches] = useState<MatchResult[]>([]);
  const [loading, setLoading] = useState(false);
  const [aiTip, setAiTip] = useState('');

  useEffect(() => {
    if (!user?.id) return;
    getUserPosts(user.id)
      .then((res) => setMyPosts(res.data?.data?.posts || res.data?.data || res.data || []))
      .catch(() => setMyPosts([]));
  }, [user]);

  const handleSelectPost = async (postId: string) => {
    setSelectedPostId(postId);
    setLoading(true);
    try {
      const res = await getMatches(postId);
      const data = res.data?.data || res.data;
      setMatches(data?.matches || []);
      setAiTip(data?.matchTip || '');
    } catch { setMatches([]); }
    setLoading(false);
  };

  return (
    <div className="max-w-[480px] mx-auto px-4 pb-24 pt-6 relative z-10">
      <h1 className="font-display text-2xl mb-1">Your Swap Matches ‚ú®</h1>
      <p className="text-sm text-muted-foreground font-body mb-6">AI found these based on your plants and location</p>

      {myPosts.length > 0 && (
        <div className="mb-6">
          <p className="text-xs text-muted-foreground font-tag mb-2">Which plant are you matching for?</p>
          <div className="flex gap-3 overflow-x-auto pb-2 scrollbar-none">
            {myPosts.map((post) => (
              <button key={post._id} onClick={() => handleSelectPost(post._id)}
                className={`flex-shrink-0 flex flex-col items-center gap-1.5 ${selectedPostId === post._id ? 'opacity-100' : 'opacity-60'}`}>
                <img src={post.imageUrl} alt=""
                  className={`w-14 h-14 rounded-full object-cover border-2 transition-all ${selectedPostId === post._id ? 'border-secondary' : 'border-border'}`} />
                <span className="text-[0.6rem] font-tag text-center max-w-[60px] truncate">
                  {post.aiAnalysis?.commonName || post.title || 'Plant'}
                </span>
              </button>
            ))}
          </div>
        </div>
      )}

      {loading ? (
        <div className="flex flex-col items-center py-16 space-y-3">
          <div className="w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin" />
          <p className="text-sm text-muted-foreground font-tag">Finding matches...</p>
        </div>
      ) : matches.length > 0 ? (
        <div className="space-y-4">
          {matches.slice(0, 3).map((match, i) => (
            <MatchCard key={i} match={match} onView={() => navigate(`/post/${match.post._id}`)} delay={i * 100} />
          ))}
        </div>
      ) : selectedPostId ? (
        <div className="flex flex-col items-center py-16 space-y-4">
          <div className="text-5xl">üîç</div>
          <p className="text-sm text-muted-foreground font-body text-center">No matches found yet. Try another plant!</p>
        </div>
      ) : myPosts.length === 0 ? (
        <div className="flex flex-col items-center py-16 space-y-4">
          <div className="text-7xl">üå±</div>
          <h2 className="font-display italic text-lg">Post a plant first to find matches</h2>
          <p className="text-sm text-muted-foreground text-center font-body">Share a plant and AI will find swap partners</p>
        </div>
      ) : (
        <div className="flex flex-col items-center py-16 space-y-4">
          <div className="text-5xl">üëÜ</div>
          <p className="text-sm text-muted-foreground font-body text-center">Select one of your plants above to find matches</p>
        </div>
      )}

      {aiTip && (
        <div className="mt-6 bg-primary-light rounded-card p-4">
          <p className="text-sm font-body italic"><span className="not-italic">üí°</span> {aiTip}</p>
        </div>
      )}
    </div>
  );
};

const MatchCard = ({ match, onView, delay }: { match: MatchResult; onView: () => void; delay: number }) => {
  const { ref, inView } = useInView({ triggerOnce: true, threshold: 0.1 });
  const flag = countryFlag(match.post.location?.countryCode);
  const score = match.matchScore ?? match.score ?? 0;

  return (
    <div ref={ref}
      className={`bg-background rounded-card card-shadow p-4 flex gap-4 transition-all ${inView ? 'animate-fade-up' : 'opacity-0'}`}
      style={{ animationDelay: `${delay}ms` }}>
      {match.post.imageUrl && (
        <img src={match.post.imageUrl} alt="" className="w-20 h-20 rounded-card object-cover flex-shrink-0" />
      )}
      <div className="flex-1 min-w-0 space-y-1.5">
        <h3 className="font-display text-base truncate">{match.post.aiAnalysis?.commonName || match.post.title}</h3>
        <p className="text-xs text-muted-foreground font-tag">{match.post.location?.city} {flag}</p>
        <p className="text-xs text-muted-foreground italic font-body line-clamp-1">{match.reason}</p>
        <button onClick={onView} className="text-xs font-tag font-medium text-primary border border-primary rounded-pill px-3 py-1 hover:bg-primary/5 transition-colors">
          üí¨ View Post ‚Üí
        </button>
      </div>
      <MatchScoreRing score={score} size={56} />
    </div>
  );
};

export default Matches;
---
FILE: NotFound.tsx
import { useLocation } from "react-router-dom";
import { useEffect } from "react";

const NotFound = () => {
  const location = useLocation();

  useEffect(() => {
    console.error("404 Error: User attempted to access non-existent route:", location.pathname);
  }, [location.pathname]);

  return (
    <div className="flex min-h-screen items-center justify-center bg-muted">
      <div className="text-center">
        <h1 className="mb-4 text-4xl font-bold">404</h1>
        <p className="mb-4 text-xl text-muted-foreground">Oops! Page not found</p>
        <a href="/" className="text-primary underline hover:text-primary/90">
          Return to Home
        </a>
      </div>
    </div>
  );
};

export default NotFound;
---
FILE: PostDetail.tsx
import { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { ArrowLeft, ChevronDown, ChevronUp } from 'lucide-react';
import { getPost, expressInterest } from '@/lib/api';
import HealthBadge from '@/components/HealthBadge';
import HealthStatusBar from '@/components/HealthStatusBar';
import TypeBadge from '@/components/TypeBadge';
import InterestButton from '@/components/InterestButton';
import { countryFlag, timeAgo, weatherEmoji } from '@/lib/helpers';
import { useToast } from '@/hooks/use-toast';
import type { Post, HealthStatus } from '@/types';

const PostDetail = () => {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();
  const { toast } = useToast();
  const [post, setPost] = useState<Post | null>(null);
  const [loading, setLoading] = useState(true);
  const [tipsOpen, setTipsOpen] = useState(false);

  useEffect(() => {
    if (!id) return;
    (async () => {
      setLoading(true);
      try {
        const res = await getPost(id);
        setPost(res.data?.data || res.data);
      } catch (e) {
        console.error('Post fetch error:', e);
      }
      setLoading(false);
    })();
  }, [id]);

  const handleInterest = async () => {
    if (!post) return;
    try {
      const res = await expressInterest(post._id);
      setPost((prev) =>
        prev ? {
          ...prev,
          isInterested: res.data?.isInterested ?? !prev.isInterested,
          interestedCount: res.data?.interestedCount ?? prev.interestedCount,
        } : prev
      );
      if (!post.isInterested) toast({ title: "Interest sent! They'll see your profile üåø" });
    } catch (e) {
      console.error('Interest error:', e);
    }
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin" />
      </div>
    );
  }

  if (!post) {
    return (
      <div className="flex flex-col items-center justify-center min-h-screen space-y-3">
        <p className="font-body text-muted-foreground">Post not found</p>
        <button onClick={() => navigate('/')} className="text-primary font-body font-medium">Go Home</button>
      </div>
    );
  }

  // Flat AI analysis shape from backend
  const ai = post.aiAnalysis;
  const flag = countryFlag(post.location?.countryCode);
  const healthStatus = (ai?.healthStatus ?? 'unknown') as HealthStatus;
  const tips = ai?.tips ?? [];

  return (
    <div className="max-w-[480px] mx-auto pb-24 relative z-10">
      {/* Hero Image */}
      <div className="relative h-72">
        {post.imageUrl && (
          <img src={post.imageUrl} alt="" className="w-full h-full object-cover" />
        )}
        <button
          onClick={() => navigate(-1)}
          className="absolute top-4 left-4 w-10 h-10 rounded-full bg-background/80 backdrop-blur flex items-center justify-center"
        >
          <ArrowLeft className="w-5 h-5" />
        </button>
      </div>

      {/* Content card overlapping image */}
      <div className="relative -mt-10 bg-background rounded-t-[2rem] px-5 pt-6 pb-8 space-y-5">

        {/* Species + type */}
        <div className="flex items-start justify-between">
          <div className="space-y-1">
            <h1 className="font-display text-2xl">
              {ai?.emoji} {ai?.commonName || post.title || 'Unknown Plant'}
            </h1>
            <p className="text-sm text-muted-foreground italic font-body">{ai?.species}</p>
          </div>
          <TypeBadge type={post.type} />
        </div>

        {/* Poster info */}
        <div className="flex items-center gap-3">
          {post.user?.avatar ? (
            <img src={post.user.avatar} className="w-10 h-10 rounded-full object-cover" alt="" />
          ) : (
            <div className="w-10 h-10 rounded-full bg-primary-light flex items-center justify-center font-display text-sm">
              {(post.user?.name || '?')[0]}
            </div>
          )}
          <div>
            <p className="font-body font-medium text-sm">{post.user?.name}</p>
            <p className="text-xs text-muted-foreground font-tag">
              üìç {post.location?.city} {flag} ¬∑ {timeAgo(post.createdAt)}
            </p>
          </div>
        </div>

        {/* Health */}
        <div className="space-y-3">
          <HealthBadge status={healthStatus} />
          <p className="text-sm font-body">{ai?.diagnosis}</p>
          <HealthStatusBar status={healthStatus} />
        </div>

        {/* Fun fact */}
        {ai?.funFact && (
          <div className="bg-card rounded-card p-3.5 border-l-[3px] border-secondary">
            <p className="text-sm font-body italic text-muted-foreground">üí° {ai.funFact}</p>
          </div>
        )}

        {/* Care details pills */}
        {(ai?.careLevel || ai?.wateringFrequency || ai?.sunlight) && (
          <div className="flex flex-wrap gap-2">
            {ai?.careLevel && (
              <span className="bg-primary-light text-foreground rounded-pill px-3 py-1 text-xs font-tag">
                ‚ö° {ai.careLevel} care
              </span>
            )}
            {ai?.wateringFrequency && (
              <span className="bg-primary-light text-foreground rounded-pill px-3 py-1 text-xs font-tag">
                üíß {ai.wateringFrequency}
              </span>
            )}
            {ai?.sunlight && (
              <span className="bg-primary-light text-foreground rounded-pill px-3 py-1 text-xs font-tag">
                ‚òÄÔ∏è {ai.sunlight}
              </span>
            )}
          </div>
        )}

        {/* Weather snapshot */}
        {post.weatherSnapshot && (
          <div className="bg-card rounded-card p-3.5 flex items-center gap-2">
            <span className="text-lg">{weatherEmoji(post.weatherSnapshot.condition)}</span>
            <p className="text-sm font-tag text-muted-foreground">
              Posted when it was {Math.round(post.weatherSnapshot.temperature)}¬∞C in {post.location?.city}
            </p>
          </div>
        )}

        {/* Care tips accordion */}
        {tips.length > 0 && (
          <div className="bg-card rounded-card overflow-hidden">
            <button
              onClick={() => setTipsOpen(!tipsOpen)}
              className="w-full px-4 py-3.5 flex items-center justify-between"
            >
              <span className="font-body font-semibold text-sm">Care Tips üåø</span>
              {tipsOpen ? <ChevronUp className="w-4 h-4" /> : <ChevronDown className="w-4 h-4" />}
            </button>
            {tipsOpen && (
              <div className="px-4 pb-4 space-y-2">
                {tips.map((tip, i) => (
                  <div key={i} className="flex gap-3 border-l-[3px] border-secondary pl-3 py-1">
                    <span className="text-xs font-tag font-semibold text-primary flex-shrink-0">{i + 1}.</span>
                    <p className="text-sm font-body">{tip}</p>
                  </div>
                ))}
              </div>
            )}
          </div>
        )}

        {/* Tags */}
        {post.tags && post.tags.length > 0 && (
          <div className="flex gap-2 overflow-x-auto pb-1 scrollbar-none">
            {post.tags.map((tag, i) => (
              <span key={i} className="bg-primary-light text-foreground rounded-pill px-3 py-1 text-xs font-tag whitespace-nowrap">
                {tag}
              </span>
            ))}
          </div>
        )}

        {/* Interest CTA */}
        <div className="space-y-3 pt-2">
          {(post.interestedCount || 0) > 0 && (
            <div className="flex items-center gap-2">
              <div className="flex -space-x-2">
                {[...Array(Math.min(post.interestedCount || 0, 3))].map((_, i) => (
                  <div key={i} className="w-7 h-7 rounded-full bg-primary-light border-2 border-background flex items-center justify-center text-[0.5rem] font-tag">
                    üåø
                  </div>
                ))}
              </div>
              <span className="text-xs text-muted-foreground font-tag">
                {post.interestedCount} people interested
              </span>
            </div>
          )}
          <InterestButton
            count={post.interestedCount || 0}
            isInterested={post.isInterested || false}
            onToggle={handleInterest}
            fullWidth
          />
        </div>
      </div>
    </div>
  );
};

export default PostDetail;
---
FILE: Profile.tsx
import { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useApp } from '@/context/AppContext';
import { logout as logoutApi } from '@/lib/api';
import LocationPill from '@/components/LocationPill';
import { cn } from '@/lib/utils';
import { ChevronDown, ChevronUp, MapPin, Edit2, LogOut } from 'lucide-react';
import type { FeedType } from '@/types';

const Profile = () => {
  const navigate = useNavigate();
  const { user, setUser, location, feedType, setFeedType } = useApp();
  const [scheduleOpen, setScheduleOpen] = useState(false);
  const [activeTab, setActiveTab] = useState<'plants' | 'swaps'>('plants');

  const profileName = user?.name || 'Plant Lover';
  const bio = user?.bio || 'Growing my urban jungle one plant at a time üåø';
  const stats = {
    plants: user?.totalPosts ?? 0,
    swaps: user?.totalSwaps ?? 0,
    rank: 0,
  };

  const handleLogout = async () => {
    try { await logoutApi(); } catch {}
    localStorage.removeItem('bagichalink_token');
    setUser(null);
    navigate('/login');
  };

  return (
    <div className="max-w-[480px] mx-auto pb-24 relative z-10">
      <div className="relative h-40" style={{ background: 'linear-gradient(180deg, hsl(105 40% 85%), hsl(36 33% 96%))' }}>
        <div className="absolute -bottom-12 left-1/2 -translate-x-1/2">
          <div className="w-24 h-24 rounded-full border-[3px] border-background shadow-lg bg-primary-light flex items-center justify-center">
            {user?.avatar
              ? <img src={user.avatar} alt="" className="w-full h-full rounded-full object-cover" />
              : <span className="text-3xl font-display">{profileName[0]}</span>}
          </div>
        </div>
      </div>

      <div className="px-4 pt-16 space-y-6">
        <div className="text-center space-y-1">
          <h1 className="font-display text-2xl">{profileName}</h1>
          <p className="text-sm text-muted-foreground italic font-body">{bio}</p>
          {location && (
            <div className="flex justify-center mt-2">
              <LocationPill city={location.city} countryCode={location.countryCode} size="sm" />
            </div>
          )}
        </div>

        <div className="grid grid-cols-3 gap-3">
          {[
            { icon: 'üåø', value: stats.plants, label: 'Plants' },
            { icon: 'üîÑ', value: stats.swaps, label: 'Swaps' },
            { icon: 'üèÜ', value: stats.rank ? `#${stats.rank}` : '‚Äî', label: 'Rank' },
          ].map((stat) => (
            <div key={stat.label} className="bg-background rounded-card card-shadow p-4 text-center space-y-1">
              <div className="text-lg">{stat.icon}</div>
              <div className="font-display text-xl text-secondary">{stat.value}</div>
              <div className="text-[0.7rem] font-tag text-muted-foreground">{stat.label}</div>
            </div>
          ))}
        </div>

        <div className="space-y-2">
          <p className="text-xs text-muted-foreground font-tag">Show me:</p>
          <div className="flex gap-2">
            {(['global', 'nearby', 'city'] as FeedType[]).map((ft) => (
              <button key={ft} onClick={() => setFeedType(ft)}
                className={cn('flex-1 py-2 rounded-pill text-sm font-tag font-medium transition-all',
                  feedType === ft ? 'bg-forest text-forest-foreground' : 'bg-card text-foreground border border-border')}>
                {ft === 'global' ? 'üåç' : ft === 'nearby' ? 'üìç' : 'üèôÔ∏è'} {ft.charAt(0).toUpperCase() + ft.slice(1)}
              </button>
            ))}
          </div>
        </div>

        <div className="bg-card rounded-card overflow-hidden">
          <button onClick={() => setScheduleOpen(!scheduleOpen)} className="w-full px-4 py-3.5 flex items-center justify-between">
            <span className="font-body font-semibold text-sm">Your Plant Schedule üìÖ</span>
            {scheduleOpen ? <ChevronUp className="w-4 h-4" /> : <ChevronDown className="w-4 h-4" />}
          </button>
          {scheduleOpen && (
            <div className="px-4 pb-4 space-y-2">
              {['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'].map((day) => (
                <div key={day} className="flex items-center justify-between py-1.5 border-b border-border last:border-0">
                  <span className="text-sm font-tag font-medium">{day}</span>
                  <span className="text-xs text-muted-foreground font-body">Check moisture levels</span>
                </div>
              ))}
            </div>
          )}
        </div>

        <div className="space-y-4">
          <div className="flex gap-4 border-b border-border">
            {(['plants', 'swaps'] as const).map((tab) => (
              <button key={tab} onClick={() => setActiveTab(tab)}
                className={cn('pb-2 text-sm font-body font-medium transition-colors',
                  activeTab === tab ? 'border-b-2 border-secondary text-foreground' : 'text-muted-foreground')}>
                {tab === 'plants' ? 'My Plants' : 'Completed Swaps'}
              </button>
            ))}
          </div>
          <div className="flex flex-col items-center py-12 space-y-3">
            <div className="text-4xl">ü™¥</div>
            <p className="text-sm text-muted-foreground font-body">
              {activeTab === 'plants' ? 'No plants posted yet' : 'No completed swaps yet'}
            </p>
          </div>
        </div>

        <div className="flex items-center justify-center gap-6 pt-4 pb-8">
          <button className="flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground font-body">
            <MapPin className="w-3.5 h-3.5" /> Update Location
          </button>
          <button className="flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground font-body">
            <Edit2 className="w-3.5 h-3.5" /> Edit Profile
          </button>
          <button onClick={handleLogout} className="flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground font-body">
            <LogOut className="w-3.5 h-3.5" /> Logout
          </button>
        </div>
      </div>
    </div>
  );
};

export default Profile;
---
FILE: Register.tsx
import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { sendOTP, registerWithOTP, searchCities } from '@/lib/api';
import { useApp } from '@/context/AppContext';
import { countryFlag } from '@/lib/helpers';
import type { CitySearchResult } from '@/types';

type Step = 'details' | 'otp';

const Register = () => {
  const navigate = useNavigate();
  const { setUser } = useApp();
  const [step, setStep] = useState<Step>('details');
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [cityQuery, setCityQuery] = useState('');
  const [cityResults, setCityResults] = useState<CitySearchResult[]>([]);
  const [selectedCity, setSelectedCity] = useState<CitySearchResult | null>(null);
  const [otp, setOtp] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [resendCooldown, setResendCooldown] = useState(0);

  // City search
  useEffect(() => {
    if (!cityQuery || cityQuery.length < 2) { setCityResults([]); return; }
    const timeout = setTimeout(async () => {
      try {
        const res = await searchCities(cityQuery);
        setCityResults((res.data?.data || res.data || []).map((r: any) => ({ ...r, city: r.name || r.city })));
      } catch { setCityResults([]); }
    }, 300);
    return () => clearTimeout(timeout);
  }, [cityQuery]);

  // Resend cooldown timer
  useEffect(() => {
    if (resendCooldown <= 0) return;
    const timer = setTimeout(() => setResendCooldown((c) => c - 1), 1000);
    return () => clearTimeout(timer);
  }, [resendCooldown]);

  const handleSendOTP = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!name || !email) { setError('Please fill in your name and email.'); return; }
    if (!selectedCity) { setError('Please select your city.'); return; }
    setError('');
    setLoading(true);
    try {
      await sendOTP(email, 'register', name);
      setStep('otp');
      setResendCooldown(60);
    } catch (err: any) {
      setError(err.response?.data?.message || 'Failed to send OTP. Please try again.');
    }
    setLoading(false);
  };

  const handleVerifyOTP = async (e: React.FormEvent) => {
    e.preventDefault();
    if (otp.length !== 6) { setError('Please enter the 6-digit code.'); return; }
    setError('');
    setLoading(true);
    try {
      const res = await registerWithOTP({
        name,
        email,
        otp,
        location: selectedCity ? {
          city: selectedCity.city || selectedCity.name || '',
          country: selectedCity.country,
          countryCode: selectedCity.countryCode,
          lat: selectedCity.lat,
          lon: selectedCity.lon,
        } : undefined,
      });
      if (res.data?.token) {
        localStorage.setItem('bagichalink_token', res.data.token);
        setUser(res.data.user);
        navigate('/feed');
      }
    } catch (err: any) {
      setError(err.response?.data?.message || 'Invalid code. Please try again.');
    }
    setLoading(false);
  };

  const handleResend = async () => {
    if (resendCooldown > 0) return;
    try {
      await sendOTP(email, 'register', name);
      setResendCooldown(60);
      setError('');
    } catch (err: any) {
      setError('Failed to resend. Please try again.');
    }
  };

  return (
    <div className="min-h-screen bg-background flex flex-col items-center justify-center px-6 py-12">
      <div className="w-full max-w-sm space-y-6">

        {/* Header */}
        <div className="text-center space-y-2">
          <div className="text-6xl">{step === 'otp' ? 'üì¨' : 'üå±'}</div>
          <h1 className="font-display italic text-2xl text-foreground">
            {step === 'otp' ? 'Check your email' : 'Join the Garden Community'}
          </h1>
          <p className="text-sm text-muted-foreground font-body">
            {step === 'otp'
              ? `We sent a 6-digit code to ${email}`
              : 'Swap plants with gardeners worldwide üåç'}
          </p>
        </div>

        {error && (
          <div className="bg-red-50 border border-red-200 text-red-700 rounded-card px-4 py-3 text-sm font-body">
            {error}
          </div>
        )}

        {/* Step 1: Details */}
        {step === 'details' && (
          <form onSubmit={handleSendOTP} className="space-y-5">
            <input
              type="text" value={name} onChange={(e) => setName(e.target.value)}
              placeholder="Your name" required
              className="w-full bg-transparent border-0 border-b-2 border-border py-3 text-base font-body placeholder:text-muted-foreground focus:outline-none focus:border-primary transition-colors"
            />
            <input
              type="email" value={email} onChange={(e) => setEmail(e.target.value)}
              placeholder="Email address" required
              className="w-full bg-transparent border-0 border-b-2 border-border py-3 text-base font-body placeholder:text-muted-foreground focus:outline-none focus:border-primary transition-colors"
            />

            {/* City search */}
            <div className="space-y-2">
              <p className="text-xs text-muted-foreground font-tag">Where are you gardening from? üåç</p>
              {selectedCity ? (
                <div className="flex items-center gap-2 bg-primary-light rounded-pill px-4 py-2">
                  <span>{countryFlag(selectedCity.countryCode)}</span>
                  <span className="text-sm font-body flex-1">{selectedCity.city || selectedCity.name}, {selectedCity.country}</span>
                  <button type="button" onClick={() => { setSelectedCity(null); setCityQuery(''); }} className="text-muted-foreground text-xs hover:text-foreground">‚úï</button>
                </div>
              ) : (
                <div className="relative">
                  <input
                    type="text" value={cityQuery} onChange={(e) => setCityQuery(e.target.value)}
                    placeholder="Search your city..."
                    className="w-full bg-card rounded-card border border-border py-3 px-4 text-sm font-body placeholder:text-muted-foreground focus:outline-none focus:border-primary transition-colors"
                  />
                  {cityResults.length > 0 && (
                    <div className="absolute top-full left-0 right-0 bg-background border border-border rounded-card mt-1 max-h-48 overflow-y-auto z-50 shadow-lg">
                      {cityResults.map((city, i) => (
                        <button key={i} type="button"
                          onClick={() => { setSelectedCity(city); setCityQuery(''); setCityResults([]); }}
                          className="w-full text-left px-4 py-3 text-sm font-body hover:bg-card flex items-center gap-2 border-b border-border last:border-0">
                          <span>{countryFlag(city.countryCode)}</span>
                          <span>{city.name || city.city}, {city.country}</span>
                        </button>
                      ))}
                    </div>
                  )}
                </div>
              )}
            </div>

            <button type="submit" disabled={loading}
              className="w-full py-3.5 bg-secondary text-secondary-foreground rounded-pill font-body font-semibold text-base transition-transform hover:scale-[1.02] active:scale-95 disabled:opacity-50">
              {loading ? 'Sending code...' : 'Send Verification Code üìß'}
            </button>
          </form>
        )}

        {/* Step 2: OTP input */}
        {step === 'otp' && (
          <form onSubmit={handleVerifyOTP} className="space-y-5">
            {/* OTP input - big digits */}
            <div className="flex gap-2 justify-center">
              {[0,1,2,3,4,5].map((i) => (
                <input
                  key={i}
                  type="text"
                  inputMode="numeric"
                  maxLength={1}
                  value={otp[i] || ''}
                  onChange={(e) => {
                    const val = e.target.value.replace(/\D/g, '');
                    const newOtp = otp.split('');
                    newOtp[i] = val;
                    setOtp(newOtp.join(''));
                    // Auto-focus next
                    if (val && i < 5) {
                      const next = document.getElementById(`otp-${i+1}`);
                      next?.focus();
                    }
                  }}
                  onKeyDown={(e) => {
                    if (e.key === 'Backspace' && !otp[i] && i > 0) {
                      const prev = document.getElementById(`otp-${i-1}`);
                      prev?.focus();
                    }
                  }}
                  id={`otp-${i}`}
                  className="w-11 h-14 text-center text-xl font-display font-semibold bg-card border-2 border-border rounded-card focus:outline-none focus:border-primary transition-colors"
                />
              ))}
            </div>

            <button type="submit" disabled={loading || otp.length < 6}
              className="w-full py-3.5 bg-forest text-forest-foreground rounded-pill font-body font-semibold text-base transition-transform hover:scale-[1.02] active:scale-95 disabled:opacity-50">
              {loading ? 'Verifying...' : 'Verify & Create Account üåø'}
            </button>

            {/* Resend */}
            <div className="text-center space-y-2">
              <button type="button" onClick={handleResend} disabled={resendCooldown > 0}
                className="text-sm font-body text-muted-foreground hover:text-foreground disabled:opacity-40">
                {resendCooldown > 0 ? `Resend code in ${resendCooldown}s` : 'Resend code'}
              </button>
              <br />
              <button type="button" onClick={() => { setStep('details'); setOtp(''); setError(''); }}
                className="text-xs font-body text-muted-foreground hover:text-foreground">
                ‚Üê Change email
              </button>
            </div>
          </form>
        )}

        <p className="text-center text-sm font-body">
          <span className="text-muted-foreground">Already have an account? </span>
          <button onClick={() => navigate('/login')} className="text-secondary font-medium hover:underline">Sign in</button>
        </p>
      </div>
    </div>
  );
};

export default Register;
---
FILE: Landing.tsx
import { useNavigate } from 'react-router-dom';
import { Camera, Sparkles, Globe, Leaf, ArrowRight, Heart, MapPin, Zap, Shield, Users } from 'lucide-react';
import heroImage from '@/assets/hero-plants.jpg';
import scanImage from '@/assets/scan-illustration.jpg';
import communityImage from '@/assets/community-illustration.jpg';
import { useInView } from 'react-intersection-observer';
import { cn } from '@/lib/utils';

const AnimatedSection = ({ children, className, delay = 0 }: { children: React.ReactNode; className?: string; delay?: number }) => {
  const { ref, inView } = useInView({ triggerOnce: true, threshold: 0.15 });
  return (
    <div
      ref={ref}
      className={cn(
        'transition-all duration-700 ease-out',
        inView ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-8',
        className
      )}
      style={{ transitionDelay: `${delay}ms` }}
    >
      {children}
    </div>
  );
};

const stats = [
  { value: '180+', label: 'Countries', icon: Globe },
  { value: '50K+', label: 'Plants Shared', icon: Leaf },
  { value: '12K+', label: 'Swaps Made', icon: Heart },
  { value: '25K+', label: 'Gardeners', icon: Users },
];

const features = [
  {
    icon: Camera,
    title: 'AI Plant Scanner',
    description: 'Snap a photo and our AI identifies the species, diagnoses health issues, and gives weather-aware care tips ‚Äî in seconds.',
    color: 'bg-primary-light',
  },
  {
    icon: Sparkles,
    title: 'Smart Swap Matching',
    description: 'AI analyzes your plants, location, and preferences to find the perfect swap partners in your city or across the globe.',
    color: 'bg-secondary-light',
  },
  {
    icon: MapPin,
    title: 'Hyper-Local Community',
    description: 'Discover plants available in your neighborhood. Weather-aware tips tailored to your exact climate and conditions.',
    color: 'bg-primary-light',
  },
  {
    icon: Shield,
    title: 'Health Reports',
    description: 'Get detailed health diagnoses with severity scoring. Know exactly what your plant needs before you swap or share.',
    color: 'bg-secondary-light',
  },
];

const steps = [
  { num: '01', title: 'Scan Your Plant', desc: 'Take a photo and let AI do the magic ‚Äî species ID, health check, care tips.', emoji: 'üì∏' },
  { num: '02', title: 'Post to Community', desc: 'Share as Available or mark as Wanted. Your city\'s gardeners will see it instantly.', emoji: 'üå±' },
  { num: '03', title: 'Get Matched & Swap', desc: 'AI finds perfect matches. Express interest, connect, and swap plants locally.', emoji: 'ü§ù' },
];

const Landing = () => {
  const navigate = useNavigate();

  return (
    <div className="min-h-screen bg-background overflow-x-hidden">
      {/* Navigation Bar */}
      <header className="fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border/50">
        <div className="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
          <div className="flex items-center gap-2.5">
            <div className="w-9 h-9 rounded-full bg-primary flex items-center justify-center">
              <Leaf className="w-4.5 h-4.5 text-primary-foreground" />
            </div>
            <span className="font-display text-xl">BagichaLink</span>
          </div>
          <div className="hidden md:flex items-center gap-8">
            <a href="#features" className="text-sm font-body text-muted-foreground hover:text-foreground transition-colors">Features</a>
            <a href="#how-it-works" className="text-sm font-body text-muted-foreground hover:text-foreground transition-colors">How It Works</a>
            <a href="#community" className="text-sm font-body text-muted-foreground hover:text-foreground transition-colors">Community</a>
          </div>
          <div className="flex items-center gap-3">
            <button
              onClick={() => navigate('/login')}
              className="text-sm font-body font-medium text-foreground hover:text-primary transition-colors hidden sm:block"
            >
              Sign In
            </button>
            <button
              onClick={() => navigate('/register')}
              className="bg-secondary text-secondary-foreground rounded-pill px-5 py-2.5 text-sm font-body font-semibold transition-all hover:scale-105 active:scale-95 hover:shadow-lg"
            >
              Join Free
            </button>
          </div>
        </div>
      </header>

      {/* Hero Section */}
      <section className="relative pt-24 md:pt-32 pb-16 md:pb-24">
        <div className="max-w-6xl mx-auto px-6">
          <div className="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
            {/* Left: Copy */}
            <div className="space-y-8">
              <AnimatedSection>
                <div className="inline-flex items-center gap-2 bg-primary-light rounded-pill px-4 py-2 mb-4">
                  <span className="w-2 h-2 rounded-full bg-primary animate-live-pulse" />
                  <span className="text-sm font-tag font-medium text-foreground">Live in 180+ countries</span>
                </div>
              </AnimatedSection>
              <AnimatedSection delay={100}>
                <h1 className="font-display text-4xl md:text-5xl lg:text-6xl leading-[1.1] text-foreground">
                  Your plants deserve <br />
                  <span className="italic text-primary">better than</span><br />
                  <span className="text-secondary">WhatsApp chaos.</span>
                </h1>
              </AnimatedSection>
              <AnimatedSection delay={200}>
                <p className="text-lg md:text-xl font-body text-muted-foreground max-w-lg leading-relaxed">
                  Scan, share, and swap plants with gardeners worldwide. AI-powered diagnosis, weather-aware care tips, and smart matching ‚Äî all in one beautiful app.
                </p>
              </AnimatedSection>
              <AnimatedSection delay={300}>
                <div className="flex flex-col sm:flex-row gap-4">
                  <button
                    onClick={() => navigate('/register')}
                    className="group bg-forest text-forest-foreground rounded-pill px-8 py-4 font-body font-semibold text-base transition-all hover:scale-105 active:scale-95 hover:shadow-xl flex items-center justify-center gap-2"
                  >
                    Start Swapping Free üåø
                    <ArrowRight className="w-4 h-4 transition-transform group-hover:translate-x-1" />
                  </button>
                  <button
                    onClick={() => navigate('/feed')}
                    className="rounded-pill px-8 py-4 font-body font-semibold text-base border-2 border-border text-foreground transition-all hover:border-primary hover:text-primary hover:scale-105 active:scale-95"
                  >
                    Explore Plants
                  </button>
                </div>
              </AnimatedSection>
            </div>

            {/* Right: Hero Image */}
            <AnimatedSection delay={200} className="relative">
              <div className="relative rounded-[2rem] overflow-hidden card-shadow">
                <img
                  src={heroImage}
                  alt="Beautiful collection of potted plants"
                  className="w-full h-[400px] md:h-[500px] object-cover"
                />
                {/* Floating cards */}
                <div className="absolute bottom-6 left-6 right-6 flex gap-3">
                  <div className="bg-background/90 backdrop-blur-sm rounded-card px-4 py-3 card-shadow flex items-center gap-2 animate-fade-up">
                    <span className="text-lg">üåø</span>
                    <div>
                      <p className="text-xs font-tag font-semibold text-foreground">Sweet Basil</p>
                      <p className="text-[0.6rem] font-tag text-muted-foreground">üü¢ Healthy ¬∑ Mumbai üáÆüá≥</p>
                    </div>
                  </div>
                  <div className="bg-background/90 backdrop-blur-sm rounded-card px-4 py-3 card-shadow flex items-center gap-2 animate-fade-up" style={{ animationDelay: '150ms' }}>
                    <span className="text-lg">ü™¥</span>
                    <div>
                      <p className="text-xs font-tag font-semibold text-foreground">Monstera</p>
                      <p className="text-[0.6rem] font-tag text-muted-foreground">Available ¬∑ NYC üá∫üá∏</p>
                    </div>
                  </div>
                </div>
              </div>
              {/* Decorative blob */}
              <div className="absolute -top-12 -right-12 w-48 h-48 rounded-full bg-primary-light/40 animate-blob -z-10" />
              <div className="absolute -bottom-8 -left-8 w-36 h-36 rounded-full bg-secondary-light/40 animate-blob -z-10" style={{ animationDelay: '4s' }} />
            </AnimatedSection>
          </div>
        </div>
      </section>

      {/* Stats Bar */}
      <section className="py-12 border-y border-border bg-card/50">
        <div className="max-w-6xl mx-auto px-6">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
            {stats.map((stat, i) => (
              <AnimatedSection key={stat.label} delay={i * 100} className="text-center space-y-2">
                <stat.icon className="w-6 h-6 mx-auto text-primary" />
                <p className="font-display text-3xl md:text-4xl text-secondary">{stat.value}</p>
                <p className="text-sm font-tag text-muted-foreground">{stat.label}</p>
              </AnimatedSection>
            ))}
          </div>
        </div>
      </section>

      {/* Features Section */}
      <section id="features" className="py-20 md:py-28">
        <div className="max-w-6xl mx-auto px-6">
          <AnimatedSection className="text-center space-y-4 mb-16">
            <span className="text-sm font-tag font-medium text-secondary uppercase tracking-wider">Why BagichaLink?</span>
            <h2 className="font-display text-3xl md:text-4xl text-foreground">
              Everything your garden needs,<br /><span className="italic text-primary">in your pocket</span>
            </h2>
            <p className="text-muted-foreground font-body max-w-xl mx-auto">
              From AI-powered plant identification to smart swap matching ‚Äî we make plant parenting magical.
            </p>
          </AnimatedSection>

          <div className="grid md:grid-cols-2 gap-6">
            {features.map((feature, i) => (
              <AnimatedSection key={feature.title} delay={i * 100}>
                <div className="group bg-background rounded-card card-shadow p-8 space-y-4 transition-all duration-300 hover:-translate-y-1 hover:card-shadow-hover border border-transparent hover:border-border">
                  <div className={cn('w-14 h-14 rounded-2xl flex items-center justify-center transition-transform group-hover:scale-110', feature.color)}>
                    <feature.icon className="w-7 h-7 text-foreground" />
                  </div>
                  <h3 className="font-display text-xl">{feature.title}</h3>
                  <p className="font-body text-muted-foreground leading-relaxed">{feature.description}</p>
                </div>
              </AnimatedSection>
            ))}
          </div>
        </div>
      </section>

      {/* How It Works */}
      <section id="how-it-works" className="py-20 md:py-28 bg-card/50 border-y border-border">
        <div className="max-w-6xl mx-auto px-6">
          <AnimatedSection className="text-center space-y-4 mb-16">
            <span className="text-sm font-tag font-medium text-secondary uppercase tracking-wider">Simple as 1-2-3</span>
            <h2 className="font-display text-3xl md:text-4xl text-foreground">
              How it <span className="italic text-primary">works</span>
            </h2>
          </AnimatedSection>

          <div className="grid md:grid-cols-3 gap-8">
            {steps.map((step, i) => (
              <AnimatedSection key={step.num} delay={i * 150}>
                <div className="relative bg-background rounded-card card-shadow p-8 space-y-4 text-center transition-all duration-300 hover:-translate-y-1 hover:card-shadow-hover">
                  <span className="text-5xl block">{step.emoji}</span>
                  <span className="font-display text-4xl text-border block">{step.num}</span>
                  <h3 className="font-display text-xl text-foreground">{step.title}</h3>
                  <p className="font-body text-sm text-muted-foreground leading-relaxed">{step.desc}</p>
                </div>
              </AnimatedSection>
            ))}
          </div>
        </div>
      </section>

      {/* Showcase Section */}
      <section id="community" className="py-20 md:py-28">
        <div className="max-w-6xl mx-auto px-6">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <AnimatedSection>
              <div className="relative">
                <img
                  src={communityImage}
                  alt="Plant community sharing"
                  className="rounded-[2rem] w-full h-[400px] object-cover card-shadow"
                />
                <div className="absolute -bottom-4 -right-4 w-32 h-32 rounded-full bg-primary-light/30 animate-blob -z-10" />
              </div>
            </AnimatedSection>
            <AnimatedSection delay={200} className="space-y-6">
              <span className="text-sm font-tag font-medium text-secondary uppercase tracking-wider">Join the Movement</span>
              <h2 className="font-display text-3xl md:text-4xl text-foreground leading-snug">
                A global garden,<br /><span className="italic text-primary">growing together</span>
              </h2>
              <p className="font-body text-muted-foreground leading-relaxed text-lg">
                From Mumbai balconies to New York rooftops, Cape Town courtyards to Tokyo windowsills ‚Äî gardeners everywhere are sharing, swapping, and growing together.
              </p>
              <div className="flex flex-wrap gap-3">
                {['üáÆüá≥ India', 'üá∫üá∏ USA', 'üáøüá¶ South Africa', 'üá¨üáß UK', 'üá¶üá∫ Australia', 'üáØüáµ Japan', 'üáßüá∑ Brazil', 'üá©üá™ Germany'].map((country) => (
                  <span key={country} className="bg-card rounded-pill px-3 py-1.5 text-xs font-tag text-muted-foreground border border-border">
                    {country}
                  </span>
                ))}
                <span className="bg-primary-light rounded-pill px-3 py-1.5 text-xs font-tag text-foreground font-medium">
                  +172 more
                </span>
              </div>
            </AnimatedSection>
          </div>
        </div>
      </section>

      {/* AI Showcase */}
      <section className="py-20 md:py-28 bg-card/50 border-y border-border">
        <div className="max-w-6xl mx-auto px-6">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <AnimatedSection className="space-y-6 order-2 lg:order-1">
              <span className="text-sm font-tag font-medium text-secondary uppercase tracking-wider">Powered by AI</span>
              <h2 className="font-display text-3xl md:text-4xl text-foreground leading-snug">
                Your plant's <span className="italic text-primary">personal doctor</span>
              </h2>
              <p className="font-body text-muted-foreground leading-relaxed text-lg">
                Our AI doesn't just identify your plant ‚Äî it checks its health, considers your local weather, and gives you care tips tailored to today's conditions.
              </p>
              <div className="space-y-4">
                {[
                  { icon: Zap, text: 'Species identification in under 3 seconds' },
                  { icon: Heart, text: 'Health diagnosis with severity scoring' },
                  { icon: Globe, text: 'Weather-aware daily care tips' },
                  { icon: Sparkles, text: 'Smart swap matching algorithm' },
                ].map((item) => (
                  <div key={item.text} className="flex items-center gap-3">
                    <div className="w-8 h-8 rounded-full bg-primary-light flex items-center justify-center flex-shrink-0">
                      <item.icon className="w-4 h-4 text-primary" />
                    </div>
                    <span className="font-body text-sm text-foreground">{item.text}</span>
                  </div>
                ))}
              </div>
            </AnimatedSection>
            <AnimatedSection delay={200} className="order-1 lg:order-2">
              <div className="relative flex justify-center">
                <img
                  src={scanImage}
                  alt="AI plant scanning"
                  className="rounded-[2rem] w-72 md:w-80 card-shadow"
                />
                <div className="absolute -top-6 -left-6 w-32 h-32 rounded-full bg-secondary-light/30 animate-blob -z-10" />
              </div>
            </AnimatedSection>
          </div>
        </div>
      </section>

      {/* CTA Section */}
      <section className="py-24 md:py-32">
        <div className="max-w-6xl mx-auto px-6">
          <AnimatedSection>
            <div className="relative bg-forest rounded-[2rem] p-12 md:p-16 text-center overflow-hidden">
              {/* Decorative elements */}
              <div className="absolute top-0 left-0 w-40 h-40 rounded-full bg-primary/20 -translate-x-1/2 -translate-y-1/2 animate-blob" />
              <div className="absolute bottom-0 right-0 w-56 h-56 rounded-full bg-secondary/10 translate-x-1/3 translate-y-1/3 animate-blob" style={{ animationDelay: '3s' }} />

              <div className="relative z-10 space-y-6 max-w-2xl mx-auto">
                <span className="text-5xl md:text-6xl block">üåø</span>
                <h2 className="font-display text-3xl md:text-4xl text-forest-foreground leading-snug">
                  Ready to grow your garden community?
                </h2>
                <p className="font-body text-forest-foreground/80 text-lg">
                  Join thousands of gardeners sharing plants, knowledge, and joy across the globe.
                </p>
                <div className="flex flex-col sm:flex-row gap-4 justify-center">
                  <button
                    onClick={() => navigate('/register')}
                    className="group bg-secondary text-secondary-foreground rounded-pill px-10 py-4 font-body font-semibold text-lg transition-all hover:scale-105 active:scale-95 hover:shadow-xl flex items-center justify-center gap-2"
                  >
                    Join BagichaLink ‚Äî It's Free
                    <ArrowRight className="w-5 h-5 transition-transform group-hover:translate-x-1" />
                  </button>
                </div>
                <p className="text-sm font-tag text-forest-foreground/50">
                  No credit card required ¬∑ Available worldwide
                </p>
              </div>
            </div>
          </AnimatedSection>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-12 border-t border-border">
        <div className="max-w-6xl mx-auto px-6">
          <div className="flex flex-col md:flex-row items-center justify-between gap-6">
            <div className="flex items-center gap-2.5">
              <div className="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
                <Leaf className="w-4 h-4 text-primary-foreground" />
              </div>
              <span className="font-display text-lg">BagichaLink</span>
            </div>
            <div className="flex items-center gap-6">
              <a href="#features" className="text-sm font-body text-muted-foreground hover:text-foreground transition-colors">Features</a>
              <a href="#how-it-works" className="text-sm font-body text-muted-foreground hover:text-foreground transition-colors">How It Works</a>
              <a href="#community" className="text-sm font-body text-muted-foreground hover:text-foreground transition-colors">Community</a>
            </div>
            <p className="text-xs font-tag text-muted-foreground/60">
              ¬© 2026 BagichaLink. Grow together. üå±
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default Landing;
---
FILE: ScanAnalyze.tsx
import { useState, useRef, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { Camera, Upload, X, ArrowLeft } from 'lucide-react';
import { analyzePlant, createPost } from '@/lib/api';
import { useApp } from '@/context/AppContext';
import LoadingBlob from '@/components/LoadingBlob';
import HealthBadge from '@/components/HealthBadge';
import HealthStatusBar from '@/components/HealthStatusBar';
import TypeBadge from '@/components/TypeBadge';
import confetti from 'canvas-confetti';
import type { AIAnalysis } from '@/types';

type Step = 'upload' | 'analyzing' | 'result';

const cyclingTexts = [
  'Identifying species...',
  "Checking today's weather...",
  'Analyzing plant health...',
  'Generating care tips...',
];

const ScanAnalyze = () => {
  const navigate = useNavigate();
  const { location, weather } = useApp();
  const fileInputRef = useRef<HTMLInputElement>(null);
  const cameraInputRef = useRef<HTMLInputElement>(null);

  const [step, setStep] = useState<Step>('upload');
  const [imageFile, setImageFile] = useState<File | null>(null);
  const [imagePreview, setImagePreview] = useState<string>('');
  const [imageUrl, setImageUrl] = useState<string>('');
  const [analysis, setAnalysis] = useState<AIAnalysis | null>(null);
  const [cycleIndex, setCycleIndex] = useState(0);
  const [posting, setPosting] = useState(false);

  // Cycling text animation
  useEffect(() => {
    if (step !== 'analyzing') return;
    const interval = setInterval(() => {
      setCycleIndex((prev) => (prev + 1) % cyclingTexts.length);
    }, 2000);
    return () => clearInterval(interval);
  }, [step]);

  const handleFileSelect = (file: File) => {
    setImageFile(file);
    const reader = new FileReader();
    reader.onload = (e) => setImagePreview(e.target?.result as string);
    reader.readAsDataURL(file);
    startAnalysis(file);
  };

  const startAnalysis = async (file: File) => {
    setStep('analyzing');
    try {
      const formData = new FormData();
      formData.append('image', file);
      if (location) {
        formData.append('lat', String(location.lat));
        formData.append('lon', String(location.lon));
        formData.append('city', location.city);
        formData.append('country', location.country);
      }
      const res = await analyzePlant(formData);
      setAnalysis(res.data.aiAnalysis || res.data.analysis);
      setImageUrl(res.data.imageUrl || imagePreview);
      setStep('result');
    } catch (e) {
      console.error('Analysis failed:', e);
      setStep('upload');
    }
  };

  const handlePost = async (type: 'available' | 'wanted') => {
    if (!analysis || !imageFile) return;
    setPosting(true);
    try {
      const formData = new FormData();
      formData.append('type', type);
      formData.append('imageUrl', imageUrl);
      formData.append('aiAnalysis', JSON.stringify(analysis));
      formData.append('tags', JSON.stringify(analysis.tags || []));
      if (location) {
        formData.append('lat', String(location.lat));
        formData.append('lon', String(location.lon));
        formData.append('city', location.city);
        formData.append('country', location.country);
        formData.append('countryCode', location.countryCode);
      }
      await createPost(formData);
      // Confetti!
      confetti({
        particleCount: 100,
        spread: 70,
        colors: ['#5C7A4E', '#C4714A', '#D6E8C8', '#F2D5C4'],
        origin: { y: 0.7 },
      });
      setTimeout(() => navigate('/'), 1500);
    } catch (e) {
      console.error('Post creation failed:', e);
    }
    setPosting(false);
  };

  if (step === 'analyzing') {
    return (
      <div className="fixed inset-0 z-50 bg-background flex flex-col items-center justify-center">
        <LoadingBlob />
        <div className="absolute inset-0 flex flex-col items-center justify-center z-10">
          <div className="text-6xl mb-6">{analysis?.species?.emoji || 'üåø'}</div>
          <p className="font-body text-lg text-foreground animate-text-cycle" key={cycleIndex}>
            {cyclingTexts[cycleIndex]}
          </p>
          <div className="w-48 h-1 bg-border rounded-pill mt-6 overflow-hidden">
            <div className="h-full bg-primary rounded-pill animate-pulse" style={{ width: '60%' }} />
          </div>
        </div>
      </div>
    );
  }

  if (step === 'result' && analysis) {
    return (
      <div className="fixed inset-0 z-50 bg-background overflow-y-auto">
        <div className="max-w-[480px] lg:max-w-3xl mx-auto">
          {/* Plant Image */}
          <div className="relative h-52">
            <img src={imageUrl || imagePreview} alt="" className="w-full h-full object-cover" />
            <button
              onClick={() => { setStep('upload'); setAnalysis(null); }}
              className="absolute top-4 left-4 w-10 h-10 rounded-full bg-background/80 backdrop-blur flex items-center justify-center"
            >
              <ArrowLeft className="w-5 h-5" />
            </button>
            <div className="absolute top-4 right-4">
              <HealthBadge status={analysis.health?.status || 'healthy'} />
            </div>
            <div className="absolute bottom-4 left-4 text-4xl">
              {analysis.species?.emoji || 'üåø'}
            </div>
          </div>

          {/* Content */}
          <div className="p-5 space-y-5">
            {/* Species */}
            <div className="space-y-1">
              <h1 className="font-display text-2xl">{analysis.species?.commonName}</h1>
              <p className="text-sm text-muted-foreground italic font-body">
                {analysis.species?.scientificName}
              </p>
            </div>

            {/* Fun fact */}
            {analysis.species?.funFact && (
              <div className="bg-card rounded-card p-4 border-l-[3px] border-secondary">
                <p className="text-sm italic text-muted-foreground font-body">
                  {analysis.species.funFact}
                </p>
              </div>
            )}

            {/* Care pills */}
            <div className="flex gap-2">
              {analysis.care?.level && (
                <span className="bg-primary-light text-foreground rounded-pill px-3 py-1.5 text-xs font-tag">
                  ‚ö° {analysis.care.level}
                </span>
              )}
              {analysis.care?.watering && (
                <span className="bg-primary-light text-foreground rounded-pill px-3 py-1.5 text-xs font-tag">
                  üíß {analysis.care.watering}
                </span>
              )}
            </div>

            {/* Health Report */}
            <div className="space-y-3">
              <h3 className="font-body font-semibold text-base">Health Report üîç</h3>
              <p className="text-sm font-body text-foreground">{analysis.health?.diagnosis}</p>
              <HealthStatusBar score={analysis.health?.score || 80} />
            </div>

            {/* Tips */}
            {analysis.care?.tips && analysis.care.tips.length > 0 && (
              <div className="space-y-3">
                <h3 className="font-body font-semibold text-base">
                  Tips for Today {weather ? `${weather.condition}` : ''}
                </h3>
                {analysis.care.tips.slice(0, 3).map((tip, i) => (
                  <div key={i} className="flex gap-3 bg-card rounded-card p-3.5 border-l-[3px] border-secondary">
                    <span className="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-primary-foreground flex items-center justify-center text-xs font-tag font-semibold">
                      {i + 1}
                    </span>
                    <p className="text-sm font-body">{tip}</p>
                  </div>
                ))}
              </div>
            )}

            {/* Tags */}
            {analysis.tags && analysis.tags.length > 0 && (
              <div className="flex gap-2 overflow-x-auto pb-1 scrollbar-none">
                {analysis.tags.map((tag, i) => (
                  <span key={i} className="bg-primary-light text-foreground rounded-pill px-3 py-1 text-xs font-tag whitespace-nowrap">
                    {tag}
                  </span>
                ))}
              </div>
            )}

            {/* Action buttons */}
            <div className="space-y-3 pt-2 pb-8">
              <button
                onClick={() => handlePost('available')}
                disabled={posting}
                className="w-full py-3.5 bg-forest text-forest-foreground rounded-pill font-body font-semibold text-base transition-transform hover:scale-[1.02] active:scale-95 disabled:opacity-50"
              >
                üå± Post as Available
              </button>
              <button
                onClick={() => handlePost('wanted')}
                disabled={posting}
                className="w-full py-3.5 bg-background text-primary border-2 border-primary rounded-pill font-body font-semibold text-base transition-transform hover:scale-[1.02] active:scale-95 disabled:opacity-50"
              >
                üîç Post as Wanted
              </button>
              <button className="w-full text-center text-sm text-muted-foreground font-body hover:text-foreground">
                Save to My Garden
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // Upload step
  return (
    <div className="fixed inset-0 z-50 bg-background">
      <div className="max-w-[480px] lg:max-w-3xl mx-auto px-4 lg:px-8 pt-6 pb-24 lg:pb-8">
        <div className="flex items-center justify-between mb-8">
          <button onClick={() => navigate(-1)} className="text-muted-foreground hover:text-foreground">
            <X className="w-6 h-6" />
          </button>
        </div>

        <div className="text-center mb-8 space-y-2">
          <h1 className="font-display text-2xl">Scan Your Plant</h1>
          <p className="text-sm text-muted-foreground font-body">
            AI will diagnose it and match it for swap
          </p>
        </div>

        {imagePreview ? (
          <div className="relative rounded-card overflow-hidden mb-6">
            <img src={imagePreview} alt="Preview" className="w-full aspect-square object-cover" />
            <button
              onClick={() => { setImagePreview(''); setImageFile(null); }}
              className="absolute top-3 right-3 w-8 h-8 rounded-full bg-background/80 flex items-center justify-center"
            >
              <X className="w-4 h-4" />
            </button>
          </div>
        ) : (
          <div className="grid grid-cols-2 gap-4 mb-6">
            <button
              onClick={() => cameraInputRef.current?.click()}
              className="aspect-square rounded-card bg-card card-shadow flex flex-col items-center justify-center gap-3 transition-all hover:-translate-y-0.5 hover:card-shadow-hover active:scale-95"
            >
              <Camera className="w-12 h-12 text-primary" />
              <span className="font-body font-medium text-sm">Take Photo</span>
            </button>
            <button
              onClick={() => fileInputRef.current?.click()}
              className="aspect-square rounded-card bg-card card-shadow flex flex-col items-center justify-center gap-3 transition-all hover:-translate-y-0.5 hover:card-shadow-hover active:scale-95"
            >
              <Upload className="w-12 h-12 text-primary" />
              <span className="font-body font-medium text-sm">Upload Photo</span>
            </button>
          </div>
        )}

        {location && (
          <p className="text-xs text-muted-foreground text-center font-tag">
            üìç Using your location for weather-aware tips
          </p>
        )}
        {!location && (
          <p className="text-xs text-muted-foreground text-center font-tag">
            Location unavailable ‚Äî tips will be general
          </p>
        )}

        <input
          ref={cameraInputRef}
          type="file"
          accept="image/*"
          capture="environment"
          className="hidden"
          onChange={(e) => e.target.files?.[0] && handleFileSelect(e.target.files[0])}
        />
        <input
          ref={fileInputRef}
          type="file"
          accept="image/*"
          className="hidden"
          onChange={(e) => e.target.files?.[0] && handleFileSelect(e.target.files[0])}
        />
      </div>
    </div>
  );
};

export default ScanAnalyze;
